-- PS99 Auto Lockpick (FULL FIX)

local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Network = ReplicatedStorage:WaitForChild("Network")
local Players = game:GetService("Players")
local player = Players.LocalPlayer

-- CONFIG
local config = {
    autoLockpick = false,
    lockpickType = "Lockpick A",
    delayBetweenAttempts = 2,
}

-- GUI
local function createGUI()
    local gui = Instance.new("ScreenGui")
    gui.Name = "AutoLockpickGUI"
    gui.ResetOnSpawn = false

    local frame = Instance.new("Frame")
    frame.Parent = gui
    frame.Size = UDim2.new(0,220,0,160)
    frame.Position = UDim2.new(0.5,-110,0.1,0)
    frame.BackgroundColor3 = Color3.fromRGB(30,30,40)
    frame.Active = true
    frame.Draggable = true

    Instance.new("UICorner", frame).CornerRadius = UDim.new(0,12)

    local title = Instance.new("TextLabel")
    title.Parent = frame
    title.Size = UDim2.new(1,0,0,30)
    title.BackgroundTransparency = 1
    title.Text = "ðŸ”“ Auto Lockpick"
    title.TextColor3 = Color3.new(1,1,1)
    title.Font = Enum.Font.GothamBold
    title.TextSize = 16

    local status = Instance.new("TextLabel")
    status.Parent = frame
    status.Position = UDim2.new(0,10,0,40)
    status.Size = UDim2.new(1,-20,0,20)
    status.BackgroundTransparency = 1
    status.Text = "Status: OFF"
    status.TextColor3 = Color3.fromRGB(255,100,100)
    status.Font = Enum.Font.Gotham
    status.TextSize = 14
    status.TextXAlignment = Enum.TextXAlignment.Left

    local toggle = Instance.new("TextButton")
    toggle.Parent = frame
    toggle.Position = UDim2.new(0,10,0,100)
    toggle.Size = UDim2.new(0,200,0,40)
    toggle.BackgroundColor3 = Color3.fromRGB(220,50,50)
    toggle.Text = "START"
    toggle.Font = Enum.Font.GothamBold
    toggle.TextSize = 16
    toggle.TextColor3 = Color3.new(1,1,1)

    Instance.new("UICorner", toggle)

    gui.Parent = player:WaitForChild("PlayerGui")
    return toggle, status
end

-- LOCKPICK LOGIC (SAFE)
local function attemptLockpick()
    local request = Network:FindFirstChild("Lockpick Game: Request Unlock")
    local claim = Network:FindFirstChild("Lockpick Game: Claim")

    if not request or not claim then return end

    request:FireServer({
        Lockpick = config.lockpickType
    })

    task.wait(2)
    claim:FireServer()
end

-- GUI INIT
local toggle, status = createGUI()

-- LOOP
task.spawn(function()
    while task.wait(0.5) do
        if config.autoLockpick then
            pcall(attemptLockpick)
            task.wait(config.delayBetweenAttempts)
        end
    end
end)

-- BUTTON
toggle.MouseButton1Click:Connect(function()
    config.autoLockpick = not config.autoLockpick

    if config.autoLockpick then
        toggle.Text = "STOP"
        toggle.BackgroundColor3 = Color3.fromRGB(50,220,50)
        status.Text = "Status: ON"
        status.TextColor3 = Color3.fromRGB(100,255,100)
    else
        toggle.Text = "START"
        toggle.BackgroundColor3 = Color3.fromRGB(220,50,50)
        status.Text = "Status: OFF"
        status.TextColor3 = Color3.fromRGB(255,100,100)
    end
end)

print("PS99 Auto Lockpick loaded (NO ERRORS)")
