--=====================================================
-- TP & FOLLOW ALL PLAYERS (SAFE + SIMPLE)
--=====================================================

repeat task.wait() until game:IsLoaded()

--// SERVICES
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

--// SETTINGS
local FOLLOW_TIME = 10          -- seconds per player
local FOLLOW_OFFSET = Vector3.new(0, -4, 0) -- below target
local UPDATE_RATE = 0.1         -- follow smoothness

--// UTILS
local function getHRP(char)
    return char and char:FindFirstChild("HumanoidRootPart")
end

--// MAIN LOOP
task.spawn(function()
    while true do
        for _, target in ipairs(Players:GetPlayers()) do
            if target ~= LocalPlayer then
                local success = pcall(function()
                    local myChar = LocalPlayer.Character
                    local targetChar = target.Character
                    if not myChar or not targetChar then return end

                    local myHRP = getHRP(myChar)
                    local targetHRP = getHRP(targetChar)
                    if not myHRP or not targetHRP then return end

                    local startTime = tick()

                    -- follow for FOLLOW_TIME seconds
                    while tick() - startTime < FOLLOW_TIME do
                        if not myHRP or not targetHRP then break end

                        myHRP.CFrame =
                            targetHRP.CFrame * CFrame.new(FOLLOW_OFFSET)

                        myHRP.AssemblyLinearVelocity = Vector3.zero
                        task.wait(UPDATE_RATE)
                    end
                end)

                -- small delay before next player (stability)
                task.wait(0.3)
            end
        end

        -- restart loop if players still exist
        task.wait(1)
    end
end)

print("âœ… TP & FOLLOW ALL PLAYERS SCRIPT RUNNING")
