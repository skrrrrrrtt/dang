-- Pet Simulator 99 Auto Lockpick (UPDATED WITH SCAN DATA)
-- Stand near the door before starting!

local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")
local player = Players.LocalPlayer

-- Wait for Network to be available
local Network = ReplicatedStorage:WaitForChild("Network", 10)
if not Network then
    warn("âš ï¸ CRITICAL: Network folder not found!")
    return
end

-- Configuration
local config = {
    autoLockpick = false,
    lockpickType = "Lockpick A", -- "Lockpick A", "Lockpick B", "Lockpick C"
    delayBetweenAttempts = 3, -- Increased delay
    maxRetries = 3,
}

-- Create GUI
local function createGUI()
    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "AutoLockpickGUI"
    screenGui.ResetOnSpawn = false
    screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    
    local mainFrame = Instance.new("Frame")
    mainFrame.Name = "MainFrame"
    mainFrame.Size = UDim2.new(0, 220, 0, 180)
    mainFrame.Position = UDim2.new(0.5, -110, 0.1, 0)
    mainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 40)
    mainFrame.BorderSizePixel = 0
    mainFrame.Active = true
    mainFrame.Draggable = true
    mainFrame.Parent = screenGui
    
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 12)
    corner.Parent = mainFrame
    
    local stroke = Instance.new("UIStroke")
    stroke.Color = Color3.fromRGB(60, 60, 80)
    stroke.Thickness = 2
    stroke.Parent = mainFrame
    
    local title = Instance.new("TextLabel")
    title.Size = UDim2.new(1, 0, 0, 30)
    title.BackgroundTransparency = 1
    title.Text = "ğŸ”“ Auto Lockpick"
    title.TextColor3 = Color3.fromRGB(255, 255, 255)
    title.TextSize = 16
    title.Font = Enum.Font.GothamBold
    title.Parent = mainFrame
    
    local statusLabel = Instance.new("TextLabel")
    statusLabel.Size = UDim2.new(1, -20, 0, 20)
    statusLabel.Position = UDim2.new(0, 10, 0, 35)
    statusLabel.BackgroundTransparency = 1
    statusLabel.Text = "Status: OFF"
    statusLabel.TextColor3 = Color3.fromRGB(255, 100, 100)
    statusLabel.TextSize = 14
    statusLabel.Font = Enum.Font.Gotham
    statusLabel.TextXAlignment = Enum.TextXAlignment.Left
    statusLabel.Parent = mainFrame
    
    local typeLabel = Instance.new("TextLabel")
    typeLabel.Size = UDim2.new(1, -20, 0, 20)
    typeLabel.Position = UDim2.new(0, 10, 0, 60)
    typeLabel.BackgroundTransparency = 1
    typeLabel.Text = "Lockpick: Normal ğŸ”‘"
    typeLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
    typeLabel.TextSize = 12
    typeLabel.Font = Enum.Font.Gotham
    typeLabel.TextXAlignment = Enum.TextXAlignment.Left
    typeLabel.Parent = mainFrame
    
    local buttonContainer = Instance.new("Frame")
    buttonContainer.Size = UDim2.new(1, -20, 0, 30)
    buttonContainer.Position = UDim2.new(0, 10, 0, 85)
    buttonContainer.BackgroundTransparency = 1
    buttonContainer.Parent = mainFrame
    
    local normalButton = Instance.new("TextButton")
    normalButton.Size = UDim2.new(0.3, -5, 1, 0)
    normalButton.Position = UDim2.new(0, 0, 0, 0)
    normalButton.BackgroundColor3 = Color3.fromRGB(100, 150, 255)
    normalButton.Text = "Normal"
    normalButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    normalButton.TextSize = 12
    normalButton.Font = Enum.Font.GothamBold
    normalButton.Parent = buttonContainer
    
    local normalCorner = Instance.new("UICorner")
    normalCorner.CornerRadius = UDim.new(0, 6)
    normalCorner.Parent = normalButton
    
    local goldenButton = Instance.new("TextButton")
    goldenButton.Size = UDim2.new(0.3, -5, 1, 0)
    goldenButton.Position = UDim2.new(0.35, 0, 0, 0)
    goldenButton.BackgroundColor3 = Color3.fromRGB(80, 80, 90)
    goldenButton.Text = "Golden"
    goldenButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    goldenButton.TextSize = 12
    goldenButton.Font = Enum.Font.GothamBold
    goldenButton.Parent = buttonContainer
    
    local goldenCorner = Instance.new("UICorner")
    goldenCorner.CornerRadius = UDim.new(0, 6)
    goldenCorner.Parent = goldenButton
    
    local diamondButton = Instance.new("TextButton")
    diamondButton.Size = UDim2.new(0.3, -5, 1, 0)
    diamondButton.Position = UDim2.new(0.7, 0, 0, 0)
    diamondButton.BackgroundColor3 = Color3.fromRGB(80, 80, 90)
    diamondButton.Text = "Diamond"
    diamondButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    diamondButton.TextSize = 12
    diamondButton.Font = Enum.Font.GothamBold
    diamondButton.Parent = buttonContainer
    
    local diamondCorner = Instance.new("UICorner")
    diamondCorner.CornerRadius = UDim.new(0, 6)
    diamondCorner.Parent = diamondButton
    
    local toggleButton = Instance.new("TextButton")
    toggleButton.Size = UDim2.new(0, 200, 0, 40)
    toggleButton.Position = UDim2.new(0, 10, 0, 130)
    toggleButton.BackgroundColor3 = Color3.fromRGB(220, 50, 50)
    toggleButton.Text = "START"
    toggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    toggleButton.TextSize = 16
    toggleButton.Font = Enum.Font.GothamBold
    toggleButton.Parent = mainFrame
    
    local buttonCorner = Instance.new("UICorner")
    buttonCorner.CornerRadius = UDim.new(0, 8)
    buttonCorner.Parent = toggleButton
    
    screenGui.Parent = player:WaitForChild("PlayerGui")
    
    return screenGui, toggleButton, statusLabel, typeLabel, normalButton, goldenButton, diamondButton
end

local function updateGUI(statusLabel, typeLabel, normalButton, goldenButton, diamondButton)
    if config.autoLockpick then
        statusLabel.Text = "Status: ON âœ…"
        statusLabel.TextColor3 = Color3.fromRGB(100, 255, 100)
    else
        statusLabel.Text = "Status: OFF âŒ"
        statusLabel.TextColor3 = Color3.fromRGB(255, 100, 100)
    end
    
    local displayName = config.lockpickType == "Lockpick A" and "Normal ğŸ”‘" 
                     or config.lockpickType == "Lockpick B" and "Golden ğŸŸ¡" 
                     or "Diamond ğŸ’"
    typeLabel.Text = "Lockpick: " .. displayName
    
    normalButton.BackgroundColor3 = config.lockpickType == "Lockpick A" and Color3.fromRGB(100, 150, 255) or Color3.fromRGB(80, 80, 90)
    goldenButton.BackgroundColor3 = config.lockpickType == "Lockpick B" and Color3.fromRGB(255, 215, 0) or Color3.fromRGB(80, 80, 90)
    diamondButton.BackgroundColor3 = config.lockpickType == "Lockpick C" and Color3.fromRGB(100, 200, 255) or Color3.fromRGB(80, 80, 90)
end

-- Check player's inventory for lockpicks
local function hasLockpick()
    local success, result = pcall(function()
        -- Try to check inventory through Network
        local inventoryGet = Network:FindFirstChild("Inventory_Get") 
                          or Network:FindFirstChild("GetInventory")
                          or Network:FindFirstChild("Get Inventory")
        
        if inventoryGet then
            local inventory = inventoryGet:InvokeServer()
            if inventory and inventory.MiscItems then
                for itemName, amount in pairs(inventory.MiscItems) do
                    if string.find(itemName, "Lockpick") and amount > 0 then
                        return true
                    end
                end
            end
        end
        return false
    end)
    
    return success and result
end

-- The ACTUAL lockpick function with improved error handling
local function attemptLockpick()
    print("â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”")
    print("ğŸ”“ Attempting lockpick with:", config.lockpickType)
    
    -- Find the request remote (confirmed from scan: "Lockpick Game: Request Unlock")
    local requestUnlock = Network:FindFirstChild("Lockpick Game: Request Unlock")
    
    if not requestUnlock then
        warn("âš ï¸ Remote 'Lockpick Game: Request Unlock' not found!")
        warn("âš ï¸ The game may have been updated. Check for new scan.")
        return false
    end
    
    print("âœ… Found request remote")
    
    -- Try to start lockpick game
    local success, result = pcall(function()
        return requestUnlock:InvokeServer(config.lockpickType)
    end)
    
    if not success then
        warn("âš ï¸ Request failed:", result)
        warn("âš ï¸ Common issues:")
        warn("   - Not close enough to door")
        warn("   - No lockpicks in inventory")
        warn("   - Door already unlocked")
        warn("   - Cooldown active")
        return false
    end
    
    print("ğŸ“Š Server response:", tostring(result))
    
    if not result or result == false then
        warn("âš ï¸ Server refused request. Reasons:")
        warn("   1. No lockpicks in inventory")
        warn("   2. Too far from door (must be VERY close)")
        warn("   3. Door already unlocked")
        warn("   4. Another lockpick game in progress")
        return false
    end
    
    print("âœ… Lockpick game started successfully!")
    
    -- Wait for the lockpick minigame to process
    wait(0.5)
    
    -- Wait for game completion (usually 2-3 seconds)
    print("â³ Waiting for game to finish...")
    wait(2.5)
    
    -- Find the claim remote (confirmed from scan: "Lockpick Game: Claim")
    local claimEvent = Network:FindFirstChild("Lockpick Game: Claim")
    
    if not claimEvent then
        warn("âš ï¸ Remote 'Lockpick Game: Claim' not found!")
        return false
    end
    
    print("âœ… Found claim remote, attempting to claim...")
    
    -- Claim the result
    local claimSuccess, claimResult = pcall(function()
        return claimEvent:InvokeServer()
    end)
    
    if not claimSuccess then
        warn("âš ï¸ Claim failed:", claimResult)
        return false
    end
    
    print("ğŸ“Š Claim result:", tostring(claimResult))
    
    if claimResult then
        print("ğŸ‰ SUCCESS! Door unlocked!")
        print("â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”")
        return true
    else
        print("âŒ Lockpick broke! Will retry...")
        print("â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”")
        return false
    end
end

-- Create GUI
local gui, toggleButton, statusLabel, typeLabel, normalButton, goldenButton, diamondButton = createGUI()

-- Main loop with retry logic
spawn(function()
    while wait(0.5) do
        if config.autoLockpick then
            local retries = 0
            local success = false
            
            while retries < config.maxRetries and not success do
                success = pcall(attemptLockpick)
                
                if not success then
                    retries = retries + 1
                    if retries < config.maxRetries then
                        print("âš ï¸ Retry " .. retries .. "/" .. config.maxRetries)
                        wait(1)
                    end
                end
            end
            
            if not success then
                print("âš ï¸ Max retries reached. Waiting before next attempt...")
            end
            
            wait(config.delayBetweenAttempts)
        end
    end
end)

-- Button handlers
toggleButton.MouseButton1Click:Connect(function()
    config.autoLockpick = not config.autoLockpick
    
    if config.autoLockpick then
        toggleButton.BackgroundColor3 = Color3.fromRGB(50, 220, 50)
        toggleButton.Text = "STOP"
        print("â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”")
        print("ğŸŸ¢ Auto Lockpick STARTED!")
        print("")
        print("âš ï¸ CRITICAL REMINDERS:")
        print("1. Stand DIRECTLY in front of Grinch Cove door")
        print("2. Make sure you have lockpicks in inventory")
        print("3. Wait for each cycle to complete")
        print("â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”")
    else
        toggleButton.BackgroundColor3 = Color3.fromRGB(220, 50, 50)
        toggleButton.Text = "START"
        print("ğŸ”´ Auto Lockpick STOPPED!")
    end
    
    updateGUI(statusLabel, typeLabel, normalButton, goldenButton, diamondButton)
end)

normalButton.MouseButton1Click:Connect(function()
    config.lockpickType = "Lockpick A"
    print("ğŸ”‘ Selected: Normal Lockpick (Lockpick A)")
    updateGUI(statusLabel, typeLabel, normalButton, goldenButton, diamondButton)
end)

goldenButton.MouseButton1Click:Connect(function()
    config.lockpickType = "Lockpick B"
    print("ğŸŸ¡ Selected: Golden Lockpick (Lockpick B)")
    updateGUI(statusLabel, typeLabel, normalButton, goldenButton, diamondButton)
end)

diamondButton.MouseButton1Click:Connect(function()
    config.lockpickType = "Lockpick C"
    print("ğŸ’ Selected: Diamond Lockpick (Lockpick C)")
    updateGUI(statusLabel, typeLabel, normalButton, goldenButton, diamondButton)
end)

print("â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”")
print("ğŸ® PS99 Auto Lockpick LOADED!")
print("ğŸ“… Updated: Based on Jan 12, 2026 scan")
print("")
print("âœ… Confirmed Remotes:")
print("   - Lockpick Game: Request Unlock")
print("   - Lockpick Game: Claim")
print("")
print("âš ï¸ SETUP CHECKLIST:")
print("1ï¸âƒ£ Go to Grinch Cove (Christmas World)")
print("2ï¸âƒ£ Stand VERY close to a locked door")
print("3ï¸âƒ£ Have Lockpick A/B/C in your inventory")
print("4ï¸âƒ£ Select lockpick type in GUI")
print("5ï¸âƒ£ Press START button")
print("")
print("ğŸ’¡ TIP: Watch the console for detailed debug info")
print("â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”")

updateGUI(statusLabel, typeLabel, normalButton, goldenButton, diamondButton)
