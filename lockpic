-- Pet Simulator 99 Auto Lockpick (WORKING VERSION)
-- Based on actual PS99 remotes

local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Network = ReplicatedStorage:WaitForChild("Network")
local Players = game:GetService("Players")

-- Configuration
local config = {
    autoLockpick = false,
    lockpickType = "Lockpick A", -- "Lockpick A" (Normal), "Lockpick B" (Golden), "Lockpick C" (Diamond)
    delayBetweenAttempts = 3,
    clicksPerAttempt = 15, -- How many times to click during the minigame
}

-- Create GUI
local function createGUI()
    local player = Players.LocalPlayer
    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "AutoLockpickGUI"
    screenGui.ResetOnSpawn = false
    screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    
    -- Main Frame (Draggable)
    local mainFrame = Instance.new("Frame")
    mainFrame.Name = "MainFrame"
    mainFrame.Size = UDim2.new(0, 220, 0, 180)
    mainFrame.Position = UDim2.new(0.5, -110, 0.1, 0)
    mainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 40)
    mainFrame.BorderSizePixel = 0
    mainFrame.Active = true
    mainFrame.Draggable = true
    mainFrame.Parent = screenGui
    
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 12)
    corner.Parent = mainFrame
    
    local stroke = Instance.new("UIStroke")
    stroke.Color = Color3.fromRGB(60, 60, 80)
    stroke.Thickness = 2
    stroke.Parent = mainFrame
    
    -- Title
    local title = Instance.new("TextLabel")
    title.Size = UDim2.new(1, 0, 0, 30)
    title.BackgroundTransparency = 1
    title.Text = "üîì Auto Lockpick"
    title.TextColor3 = Color3.fromRGB(255, 255, 255)
    title.TextSize = 16
    title.Font = Enum.Font.GothamBold
    title.Parent = mainFrame
    
    -- Status Label
    local statusLabel = Instance.new("TextLabel")
    statusLabel.Size = UDim2.new(1, -20, 0, 20)
    statusLabel.Position = UDim2.new(0, 10, 0, 35)
    statusLabel.BackgroundTransparency = 1
    statusLabel.Text = "Status: OFF"
    statusLabel.TextColor3 = Color3.fromRGB(255, 100, 100)
    statusLabel.TextSize = 14
    statusLabel.Font = Enum.Font.Gotham
    statusLabel.TextXAlignment = Enum.TextXAlignment.Left
    statusLabel.Parent = mainFrame
    
    -- Lockpick Type Label
    local typeLabel = Instance.new("TextLabel")
    typeLabel.Size = UDim2.new(1, -20, 0, 20)
    typeLabel.Position = UDim2.new(0, 10, 0, 60)
    typeLabel.BackgroundTransparency = 1
    typeLabel.Text = "Lockpick: Normal üîë"
    typeLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
    typeLabel.TextSize = 12
    typeLabel.Font = Enum.Font.Gotham
    typeLabel.TextXAlignment = Enum.TextXAlignment.Left
    typeLabel.Parent = mainFrame
    
    -- Lockpick Type Buttons Container
    local buttonContainer = Instance.new("Frame")
    buttonContainer.Size = UDim2.new(1, -20, 0, 30)
    buttonContainer.Position = UDim2.new(0, 10, 0, 85)
    buttonContainer.BackgroundTransparency = 1
    buttonContainer.Parent = mainFrame
    
    -- Normal Button
    local normalButton = Instance.new("TextButton")
    normalButton.Size = UDim2.new(0.3, -5, 1, 0)
    normalButton.Position = UDim2.new(0, 0, 0, 0)
    normalButton.BackgroundColor3 = Color3.fromRGB(100, 150, 255)
    normalButton.Text = "Normal"
    normalButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    normalButton.TextSize = 12
    normalButton.Font = Enum.Font.GothamBold
    normalButton.Parent = buttonContainer
    
    local normalCorner = Instance.new("UICorner")
    normalCorner.CornerRadius = UDim.new(0, 6)
    normalCorner.Parent = normalButton
    
    -- Golden Button
    local goldenButton = Instance.new("TextButton")
    goldenButton.Size = UDim2.new(0.3, -5, 1, 0)
    goldenButton.Position = UDim2.new(0.35, 0, 0, 0)
    goldenButton.BackgroundColor3 = Color3.fromRGB(80, 80, 90)
    goldenButton.Text = "Golden"
    goldenButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    goldenButton.TextSize = 12
    goldenButton.Font = Enum.Font.GothamBold
    goldenButton.Parent = buttonContainer
    
    local goldenCorner = Instance.new("UICorner")
    goldenCorner.CornerRadius = UDim.new(0, 6)
    goldenCorner.Parent = goldenButton
    
    -- Diamond Button
    local diamondButton = Instance.new("TextButton")
    diamondButton.Size = UDim2.new(0.3, -5, 1, 0)
    diamondButton.Position = UDim2.new(0.7, 0, 0, 0)
    diamondButton.BackgroundColor3 = Color3.fromRGB(80, 80, 90)
    diamondButton.Text = "Diamond"
    diamondButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    diamondButton.TextSize = 12
    diamondButton.Font = Enum.Font.GothamBold
    diamondButton.Parent = buttonContainer
    
    local diamondCorner = Instance.new("UICorner")
    diamondCorner.CornerRadius = UDim.new(0, 6)
    diamondCorner.Parent = diamondButton
    
    -- Toggle Button
    local toggleButton = Instance.new("TextButton")
    toggleButton.Size = UDim2.new(0, 200, 0, 40)
    toggleButton.Position = UDim2.new(0, 10, 0, 130)
    toggleButton.BackgroundColor3 = Color3.fromRGB(220, 50, 50)
    toggleButton.Text = "START"
    toggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    toggleButton.TextSize = 16
    toggleButton.Font = Enum.Font.GothamBold
    toggleButton.Parent = mainFrame
    
    local buttonCorner = Instance.new("UICorner")
    buttonCorner.CornerRadius = UDim.new(0, 8)
    buttonCorner.Parent = toggleButton
    
    screenGui.Parent = player:WaitForChild("PlayerGui")
    
    return screenGui, toggleButton, statusLabel, typeLabel, normalButton, goldenButton, diamondButton
end

-- Function to update GUI
local function updateGUI(statusLabel, typeLabel, normalButton, goldenButton, diamondButton)
    if config.autoLockpick then
        statusLabel.Text = "Status: ON"
        statusLabel.TextColor3 = Color3.fromRGB(100, 255, 100)
    else
        statusLabel.Text = "Status: OFF"
        statusLabel.TextColor3 = Color3.fromRGB(255, 100, 100)
    end
    
    local displayName = config.lockpickType == "Lockpick A" and "Normal üîë" 
                     or config.lockpickType == "Lockpick B" and "Golden üü°" 
                     or "Diamond üíé"
    typeLabel.Text = "Lockpick: " .. displayName
    
    -- Update button colors
    normalButton.BackgroundColor3 = config.lockpickType == "Lockpick A" and Color3.fromRGB(100, 150, 255) or Color3.fromRGB(80, 80, 90)
    goldenButton.BackgroundColor3 = config.lockpickType == "Lockpick B" and Color3.fromRGB(255, 215, 0) or Color3.fromRGB(80, 80, 90)
    diamondButton.BackgroundColor3 = config.lockpickType == "Lockpick C" and Color3.fromRGB(100, 200, 255) or Color3.fromRGB(80, 80, 90)
end

-- Function to attempt lockpick
local function attemptLockpick()
    print("‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ")
    print("üö™ Starting lockpick with:", config.lockpickType)
    print("‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ")
    
    -- Step 1: Request Unlock with lockpick type
    local requestUnlock = Network:FindFirstChild("Lockpick Game: Request Unlock")
    if requestUnlock then
        local success, response = pcall(function()
            return requestUnlock:InvokeServer(config.lockpickType)
        end)
        
        if success and response then
            print("‚úÖ Lockpick game started!")
        else
            warn("‚ö†Ô∏è Failed to start lockpick:", response)
            return false
        end
    else
        warn("‚ö†Ô∏è 'Lockpick Game: Request Unlock' not found!")
        return false
    end
    
    wait(0.3)
    
    -- Step 2: Perform clicks (the minigame requires clicks)
    local clickEvent = Network:FindFirstChild("Click")
    if clickEvent then
        for i = 1, config.clicksPerAttempt do
            local success = pcall(function()
                clickEvent:FireServer()
            end)
            if not success then
                warn("‚ö†Ô∏è Click failed at attempt", i)
            end
            wait(0.08) -- Small delay between clicks
        end
        print("üñ±Ô∏è Performed", config.clicksPerAttempt, "clicks")
    else
        warn("‚ö†Ô∏è 'Click' remote not found!")
    end
    
    wait(0.5)
    
    -- Step 3: Claim the result
    local claimEvent = Network:FindFirstChild("Lockpick Game: Claim")
    if claimEvent then
        local success, result = pcall(function()
            return claimEvent:InvokeServer()
        end)
        
        if success then
            if result and result.Success then
                print("üéâ SUCCESS! Door unlocked!")
                print("üéÅ Rewards:", result)
                return true
            else
                print("‚ùå Lockpick broke! Retrying...")
                return false
            end
        else
            warn("‚ö†Ô∏è Failed to claim:", result)
            return false
        end
    else
        warn("‚ö†Ô∏è 'Lockpick Game: Claim' not found!")
    end
    
    return false
end

-- Create the GUI
local gui, toggleButton, statusLabel, typeLabel, normalButton, goldenButton, diamondButton = createGUI()

-- Main lockpick loop
spawn(function()
    while wait(0.5) do
        if config.autoLockpick then
            local success, err = pcall(attemptLockpick)
            
            if not success then
                warn("‚ö†Ô∏è Error:", err)
            end
            
            wait(config.delayBetweenAttempts)
        end
    end
end)

-- Toggle button
toggleButton.MouseButton1Click:Connect(function()
    config.autoLockpick = not config.autoLockpick
    
    if config.autoLockpick then
        toggleButton.BackgroundColor3 = Color3.fromRGB(50, 220, 50)
        toggleButton.Text = "STOP"
        print("üü¢ Auto Lockpick STARTED!")
    else
        toggleButton.BackgroundColor3 = Color3.fromRGB(220, 50, 50)
        toggleButton.Text = "START"
        print("üî¥ Auto Lockpick STOPPED!")
    end
    
    updateGUI(statusLabel, typeLabel, normalButton, goldenButton, diamondButton)
end)

-- Lockpick selection buttons
normalButton.MouseButton1Click:Connect(function()
    config.lockpickType = "Lockpick A"
    print("üîë Selected: Normal Lockpick")
    updateGUI(statusLabel, typeLabel, normalButton, goldenButton, diamondButton)
end)

goldenButton.MouseButton1Click:Connect(function()
    config.lockpickType = "Lockpick B"
    print("üü° Selected: Golden Lockpick")
    updateGUI(statusLabel, typeLabel, normalButton, goldenButton, diamondButton)
end)

diamondButton.MouseButton1Click:Connect(function()
    config.lockpickType = "Lockpick C"
    print("üíé Selected: Diamond Lockpick")
    updateGUI(statusLabel, typeLabel, normalButton, goldenButton, diamondButton)
end)

-- Hover effects
toggleButton.MouseEnter:Connect(function()
    toggleButton.TextSize = 18
end)

toggleButton.MouseLeave:Connect(function()
    toggleButton.TextSize = 16
end)

print("‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ")
print("üéÆ PS99 Auto Lockpick Loaded!")
print("‚úÖ Using correct PS99 remotes")
print("üìç Stand near Grinch Cove doors")
print("üîë Select lockpick type & START!")
print("‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ")

updateGUI(statusLabel, typeLabel, normalButton, goldenButton, diamondButton)
