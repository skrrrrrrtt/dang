--[[ 
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    FULLSCREEN STATS OVERLAY (FINAL)
    â€¢ Always fullscreen (any resolution)
    â€¢ Player name
    â€¢ Diamonds (leaderstats auto-detect)
    â€¢ Session timer
    â€¢ Toggleable (non-destructive)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
]]--

local Players = game:GetService("Players")
local CoreGui = game:GetService("CoreGui")
local RunService = game:GetService("RunService")

local player = Players.LocalPlayer

-- Remove old
pcall(function()
    CoreGui:FindFirstChild("StatsOverlay"):Destroy()
end)

-- ===== GUI =====
local gui = Instance.new("ScreenGui")
gui.Name = "StatsOverlay"
gui.IgnoreGuiInset = true
gui.ResetOnSpawn = false
gui.Parent = CoreGui

-- ===== BIG ASF BACKGROUND =====
local bg = Instance.new("Frame")
bg.Name = "Background"
bg.AnchorPoint = Vector2.new(0.5, 0.5)
bg.Position = UDim2.fromScale(0.5, 0.5)
bg.Size = UDim2.fromScale(2, 2) -- ğŸ”¥ OVERKILL FULLSCREEN
bg.BackgroundColor3 = Color3.new(0,0,0)
bg.BorderSizePixel = 0
bg.Parent = gui

-- ===== CONTAINER =====
local container = Instance.new("Frame")
container.AnchorPoint = Vector2.new(0.5,0.5)
container.Position = UDim2.fromScale(0.5,0.5)
container.Size = UDim2.fromOffset(450,320)
container.BackgroundTransparency = 1
container.Parent = bg

-- ===== TITLE =====
local title = Instance.new("TextLabel")
title.Size = UDim2.new(1,0,0,50)
title.BackgroundTransparency = 1
title.Text = "STATS OVERLAY"
title.Font = Enum.Font.GothamBold
title.TextSize = 34
title.TextColor3 = Color3.new(1,1,1)
title.Parent = container

-- ===== PLAYER =====
local playerText = Instance.new("TextLabel")
playerText.Position = UDim2.fromOffset(0,80)
playerText.Size = UDim2.new(1,0,0,30)
playerText.BackgroundTransparency = 1
playerText.Text = "Player: "..player.Name
playerText.Font = Enum.Font.GothamBold
playerText.TextSize = 24
playerText.TextColor3 = Color3.fromRGB(0,255,127)
playerText.Parent = container

-- ===== DIAMONDS =====
local diamondsText = Instance.new("TextLabel")
diamondsText.Position = UDim2.fromOffset(0,140)
diamondsText.Size = UDim2.new(1,0,0,30)
diamondsText.BackgroundTransparency = 1
diamondsText.Text = "Diamonds: 0"
diamondsText.Font = Enum.Font.GothamBold
diamondsText.TextSize = 24
diamondsText.TextColor3 = Color3.fromRGB(0,191,255)
diamondsText.Parent = container

-- ===== TIMER =====
local timerText = Instance.new("TextLabel")
timerText.Position = UDim2.fromOffset(0,200)
timerText.Size = UDim2.new(1,0,0,40)
timerText.BackgroundTransparency = 1
timerText.Text = "00:00:00"
timerText.Font = Enum.Font.GothamBold
timerText.TextSize = 28
timerText.TextColor3 = Color3.fromRGB(255,215,0)
timerText.Parent = container

-- ===== CLOSE BUTTON =====
local closeBtn = Instance.new("TextButton")
closeBtn.Size = UDim2.fromOffset(150,40)
closeBtn.Position = UDim2.fromScale(0.5,1)
closeBtn.AnchorPoint = Vector2.new(0.5,1)
closeBtn.Text = "CLOSE"
closeBtn.Font = Enum.Font.GothamBold
closeBtn.TextSize = 18
closeBtn.BackgroundColor3 = Color3.fromRGB(220,20,60)
closeBtn.TextColor3 = Color3.new(1,1,1)
closeBtn.Parent = container
Instance.new("UICorner", closeBtn).CornerRadius = UDim.new(0,8)

-- ===== STATE =====
local visible = true
local startTime = os.clock()

local function setVisible(v)
    visible = v
    bg.Visible = v
end

closeBtn.MouseButton1Click:Connect(function()
    setVisible(false)
end)

-- ===== HELPERS =====
local function formatTime(sec)
    return string.format(
        "%02d:%02d:%02d",
        math.floor(sec/3600),
        math.floor(sec%3600/60),
        math.floor(sec%60)
    )
end

-- ===== UPDATE LOOP =====
RunService.RenderStepped:Connect(function()
    if not visible then return end

    -- Diamonds (leaderstats-safe)
    local diamonds = 0
    local leaderstats = player:FindFirstChild("leaderstats")
    if leaderstats then
        local d = leaderstats:FindFirstChild("Diamonds")
        if d and d:IsA("NumberValue") then
            diamonds = d.Value
        end
    end

    diamondsText.Text = "Diamonds: "..diamonds
    timerText.Text = formatTime(os.clock() - startTime)
end)

-- ===== GLOBAL CONTROL =====
getgenv().StatsOverlay = {
    open = function() setVisible(true) end,
    close = function() setVisible(false) end,
    toggle = function() setVisible(not visible) end,
    destroy = function() gui:Destroy() end
}

print("âœ… FULL STATS OVERLAY LOADED")
print("StatsOverlay.toggle()")
